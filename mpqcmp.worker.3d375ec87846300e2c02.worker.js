(()=>{"use strict";var e={p:"/diabloweb-beta/"};const t=e.p+"static/media/MpqCmp.297eba67257ec342b8de.jscc",r=self;let s=null,n=0,a=null,o=0;const i={exit_error(e){throw Error(e)},get_file_contents(e,t){e.set(s.subarray(t-n,t-n+e.byteLength))},put_file_size(e){a=new Uint8Array(e)},put_file_contents(e,t){a.set(e,t)},progress(e,t){var s;(e===t||performance.now()>o+100)&&(s=e,r.postMessage({action:"progress",value:s}),o=performance.now())}};r.DApi=i,r.addEventListener("message",(e=>{let{data:o}=e;if("run"===o.action)(async function(e){let{binary:r,mpq:o,input:i,offset:c,blockSize:l}=e;const p=await t({wasmBinary:r}).ready;s=new Uint8Array(o),n=c;const f=i.length/6,u=p._DApi_Alloc(i.byteLength);p.HEAPU32.set(i,u>>2);const b=p._DApi_Compress(c+s.length,l,f,u)>>2;return[a.buffer,p.HEAPU32.slice(b,b+4*f)]})(o).then((e=>{let[t,s]=e;return r.postMessage({action:"result",buffer:t,blocks:s},[t,s.buffer])}),(e=>r.postMessage({action:"error",error:e.toString(),stack:e.stack})))}))})();
//# sourceMappingURL=mpqcmp.worker.3d375ec87846300e2c02.worker.js.map